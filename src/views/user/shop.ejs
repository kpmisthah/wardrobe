<!DOCTYPE html>
<html lang="en">
<head>
	<title>Home</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<base href="/" />
<!--===============================================================================================-->	
<link rel="icon" type="image/png" href="/images/icons/favicon.png"/>
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css" href="/vendor/bootstrap/css/bootstrap.min.css">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css" href="/fonts/font-awesome-4.7.0/css/font-awesome.min.css">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css" href="/fonts/iconic/css/material-design-iconic-font.min.css">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css" href="/fonts/linearicons-v1.0.0/icon-font.min.css">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css" href="/vendor/animate/animate.css">
<!--===============================================================================================-->	
<link rel="stylesheet" type="text/css" href="/vendor/css-hamburgers/hamburgers.min.css">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css" href="/vendor/animsition/css/animsition.min.css">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css" href="/vendor/select2/select2.min.css">
<!--===============================================================================================-->	
<link rel="stylesheet" type="text/css" href="/vendor/daterangepicker/daterangepicker.css">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css" href="/vendor/slick/slick.css">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css" href="/vendor/MagnificPopup/magnific-popup.css">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css" href="/vendor/perfect-scrollbar/perfect-scrollbar.css">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css" href="/css/util.css">
<link rel="stylesheet" type="text/css" href="/css/main.css">
<!--===============================================================================================-->
<link rel="stylesheet" href="/css/dropdown.css">
<link rel="stylesheet" href="/css/checkout.css">
<style>
.breadcrumb {
	background-color: transparent; /* Removes background color */
	padding: 0; /* Optional: Adjust padding if needed */
	margin: 0; /* Optional: Adjust margin if needed */
	border-radius: 0; /* Optional: Removes any rounded corners */
  }

.column-7 {
    
    text-align: center;
}

.column-7 button {
    transition: transform 0.3s ease;
}

.column-7 button:hover {
    transform: scale(1.2);
}

.zmdi-delete {
    transition: color 0.3s ease;
}

.column-7 button:hover .zmdi-delete {
    color: #c0392b !important;
}






</style>
</head>
<body class="animsition">
	<header>
		<!-- Header desktop -->
		<div class="container-menu-desktop">

			<div class="wrap-menu-desktop">
				<nav class="limiter-menu-desktop container">
					
					<!-- Logo desktop -->		
					<a href="/" class="logo">
						<h1>Wardrobe</h1>
					</a>

					<!-- Menu desktop -->
					<div class="menu-desktop">
						<ul class="main-menu">
							<li class="active-menu">
								<a href="/">Home</a>
							</li>

							<li>
								<a href="/shop">Shop</a>
							</li>
							<%if(locals.user){%>
		
								<div class="dropdown show">
									<a class="btn dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
									  <%=locals.user.name%>
									</a>
									<div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
									  <a class="dropdown-item" href="/myaccount">Profile</a>
									  <a class="dropdown-item" href="/logout">Logout</a>
									</div>
								  </div>						
								  <%}else{%>
							<li>
								<a href="/signup">Sign up</a>
							</li>
							
							<li>
								<a href="/login">Login</a>
							</li>
							<%}%>
						</ul>
					</div>	

					<!-- Icon header -->
					<div class="wrap-icon-header flex-w flex-r-m">

						<div class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 js-show-modal-search">
							<i class="zmdi zmdi-search"></i>
						</div>

						<div id="cartIconContainer" class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 icon-header-noti js-show-cart" data-notify="<%=locals.cartItemCount || 0 %>">
							<i class="zmdi zmdi-shopping-cart"></i>
						</div>
						<a href="/wishlist" class="dis-block icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 icon-header-noti" data-notify="<%=locals.wishlistItemCount || 0 %>">
							<i class="zmdi zmdi-favorite-outline"></i>
						</a>
					</div>
				</nav>
			</div>	
		</div>

		<!-- Header Mobile -->
		<div class="wrap-header-mobile">
			<!-- Logo moblie -->		
			<div class="logo-mobile">
				<a href='/'><img src="images/icons/logo-01.png" alt="IMG-LOGO"></a>
			</div>

			<!-- Icon header -->
			<div class="wrap-icon-header flex-w flex-r-m m-r-15">

				<div class="icon-header-item cl2 hov-cl1 trans-04 p-r-11 js-show-modal-search">
					<i class="zmdi zmdi-search"></i>
				</div>

				<div class="icon-header-item cl2 hov-cl1 trans-04 p-r-11 p-l-10 icon-header-noti js-show-cart" data-notify="2">
					<i class="zmdi zmdi-shopping-cart"></i>
				</div>

				<a href="" class="dis-block icon-header-item cl2 hov-cl1 trans-04 p-r-11 p-l-10 icon-header-noti" data-notify="0">
					<i class="zmdi zmdi-favorite-outline"></i>
				</a>
				
			</div>

			<!-- Button show menu -->
			<div class="btn-show-menu-mobile hamburger hamburger--squeeze">
				<span class="hamburger-box">
					<span class="hamburger-inner"></span>
				</span>
			</div>
		</div>


		<!-- Menu Mobile -->
		<div class="menu-mobile">
			<ul class="topbar-mobile">
				<li>
					<div class="left-top-bar">
						Free shipping for standard order over $100
					</div>
				</li>

				<li>
					<div class="right-top-bar flex-w h-full">
						<a href="#" class="flex-c-m p-lr-10 trans-04">
							Help & FAQs
						</a>

						<a href="#" class="flex-c-m p-lr-10 trans-04">
							My Account
						</a>

						<a href="#" class="flex-c-m p-lr-10 trans-04">
							EN
						</a>

						<a href="#" class="flex-c-m p-lr-10 trans-04">
							USD
						</a>
					</div>
				</li>
			</ul>

			<ul class="main-menu-m">
				<li>
					<a href="/">Home</a>
					<span class="arrow-main-menu-m">
						<i class="fa fa-angle-right" aria-hidden="true"></i>
					</span>
				</li>

				<li>
					<a href="/shop">Shop</a>
				</li>
			</ul>
		</div>

		<!-- Modal Search -->
		<div class="modal-search-header flex-c-m trans-04 js-hide-modal-search">
			<div class="container-search-header">
				<button class="flex-c-m btn-hide-modal-search trans-04 js-hide-modal-search">
					<img src="images/icons/icon-close2.png" alt="CLOSE">
				</button>

				<form class="wrap-search-header flex-w p-l-15">
					<button class="flex-c-m trans-04">
						<i class="zmdi zmdi-search"></i>
					</button>
					<input class="plh3" type="text" name="search" placeholder="Search...">
				</form>
			</div>
		</div>
		<!-- Cart -->
		<div class="wrap-header-cart js-panel-cart">
			<div class="s-full js-hide-cart"></div>
	
			<div class="header-cart flex-col-l p-l-65 p-r-25">
				<div class="header-cart-title flex-w flex-sb-m p-b-8">
					<span class="mtext-103 cl2">
						Your Cart
					</span>
	
					<div class="fs-35 lh-10 cl2 p-lr-5 pointer hov-cl1 trans-04 js-hide-cart">
						<i class="zmdi zmdi-close"></i>
					</div>
				</div>
				
				<div class="header-cart-content flex-w js-pscroll">

					<!-- Message Section -->
					<div class="header-cart-message p-t-15 p-b-15">
						<p class="stext-101 cl2" style="text-align: left;">
							Did you forget something? Don't worry! You can visit your cart to review your items anytime.
						</p>
					</div>
					<p class="stext-101 cl2" style="text-align: center;">
						Why Shop With Us?
					</p>
					<ul style="list-style: none; text-align: center; padding: 0;">
						<li>✔ Free shipping over $50</li>
						<li>✔ 24/7 customer support</li>
						<li>✔ Easy returns</li>
					</ul>
				
					<!-- Buttons -->
					<div class="header-cart-buttons flex-w w-full">
						<a href="/cart" class="flex-c-m stext-101 cl0 size-107 bg3 bor2 hov-btn3 p-lr-15 trans-04 m-r-8 m-b-10">
							View Cart
						</a>
						<a href="/checkout" class="flex-c-m stext-101 cl0 size-107 bg3 bor2 hov-btn3 p-lr-15 trans-04 m-b-10">
							Check Out
						</a>
					</div>
				</div>
				
		</div>		
	</header>

<!-- Loader -->
<div id="loader" class="loader-container">
    <div class="spinner"></div>
</div>

<style>
    .loader-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
    }

    .spinner {
        width: 60px;
        height: 60px;
        border: 8px solid rgba(255, 255, 255, 0.3);
        border-top: 8px solid #3498db;
        border-radius: 50%;
        animation: spin 1s linear infinite;
    }

    @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }
</style>

<!-- Product Section -->
<div class="bg0 m-t-23 p-b-140">
    <div class="container" style="margin-top: 6rem;">
        <div class="flex-w flex-sb-m p-b-52">
            <!-- Filter Buttons -->
            <div class="flex-w flex-l-m filter-tope-group m-tb-10">
                <button class="stext-106 cl6 hov1 bor3 trans-04 m-r-32 m-tb-5 how-active1" data-filter="*">All Products</button>
                <button class="stext-106 cl6 hov1 bor3 trans-04 m-r-32 m-tb-5" data-filter=".women">Women</button>
                <button class="stext-106 cl6 hov1 bor3 trans-04 m-r-32 m-tb-5" data-filter=".men">Men</button>
                <button class="stext-106 cl6 hov1 bor3 trans-04 m-r-32 m-tb-5" data-filter=".kids">Kids</button>
            </div>

            <!-- Breadcrumb Navigation -->
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/">Home</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Shop</li>
                </ol>
            </nav>

            <!-- Search and Filter Toggles -->
            <div class="flex-w flex-c-m m-tb-10">
                <div class="flex-c-m stext-106 cl6 size-104 bor4 pointer hov-btn3 trans-04 m-r-8 m-tb-4 js-show-filter">
                    <i class="icon-filter cl2 m-r-6 fs-15 trans-04 zmdi zmdi-filter-list"></i>
                    <i class="icon-close-filter cl2 m-r-6 fs-15 trans-04 zmdi zmdi-close dis-none"></i>
                    Filter
                </div>

                <div class="flex-c-m stext-106 cl6 size-105 bor4 pointer hov-btn3 trans-04 m-tb-4 js-show-search">
                    <i class="icon-search cl2 m-r-6 fs-15 trans-04 zmdi zmdi-search"></i>
                    <i class="icon-close-search cl2 m-r-6 fs-15 trans-04 zmdi zmdi-close dis-none"></i>
                    Search
                </div>
            </div>

            <!-- Enhanced Search Panel -->
            <div class="dis-none panel-search w-full p-t-10 p-b-15">
                <div class="bor8 dis-flex p-l-15">
                    <button class="size-113 flex-c-m fs-16 cl2 hov-cl1 trans-04">
                        <i class="zmdi zmdi-search"></i>
                    </button>
                    <input id="searchInput" 
                           class="mtext-107 cl2 size-114 plh2 p-r-15" 
                           type="text" 
                           name="search-product" 
                           placeholder="Search by product name, category, or description">
                </div>
                <div class="p-t-10">
                    <small class="text-muted">Try searching for categories like "men", "women", or product names</small>
                </div>
            </div>

            <!-- Complete Filter Options -->
            <div class="dis-none panel-filter w-full p-t-10">
                <div class="wrap-filter flex-w bg6 w-full p-lr-40 p-t-27 p-lr-15-sm">
                    <div class="filter-col1 p-r-15 p-b-27">
                        <div class="mtext-102 cl2 p-b-15">Sort By</div>
                        <ul>
                            <li class="p-b-6"><a  class="filter-link stext-106 trans-04" onclick="applyFilter('sort', 'default')">Default</a></li>
                            <li class="p-b-6"><a class="filter-link stext-106 trans-04" onclick="applyFilter('sort', 'new')">Newness</a></li>
                            <li class="p-b-6"><a class="filter-link stext-106 trans-04" onclick="applyFilter('sort', 'priceLowtoHigh')">Price: Low to High</a></li>
                            <li class="p-b-6"><a  class="filter-link stext-106 trans-04" onclick="applyFilter('sort', 'priceHightoLow')">Price: High to Low</a></li>
                        </ul>
                    </div>

                    <div class="filter-col2 p-r-15 p-b-27">
                        <div class="mtext-102 cl2 p-b-15">Price</div>
                        <ul>
                            <li class="p-b-6"><a class="filter-link stext-106 trans-04" onclick="applyFilter('price', 'all')">All</a></li>
                            <li class="p-b-6"><a class="filter-link stext-106 trans-04" onclick="applyFilter('price', 'below-1500')">Below  ₹1500.00</a></li>
                            <li class="p-b-6"><a class="filter-link stext-106 trans-04" onclick="applyFilter('price', '1500-2000')"> ₹1500.00 -  ₹2000.00</a></li>
                            <li class="p-b-6"><a class="filter-link stext-106 trans-04" onclick="applyFilter('price', '2000-2500')"> ₹2000.00 -  ₹2500.00</a></li>
                            <li class="p-b-6"><a class="filter-link stext-106 trans-04" onclick="applyFilter('price', '2500-3000')"> ₹2500.00 -  ₹3000.00</a></li>
                            <li class="p-b-6"><a class="filter-link stext-106 trans-04" onclick="applyFilter('price', '3000-4000')"> ₹3000.00 -  ₹4000.00</a></li>
                            <li class="p-b-6"><a class="filter-link stext-106 trans-04" onclick="applyFilter('price', 'Above4000')"> ₹4000.00+</a></li>
                        </ul>
                    </div>

                    <div class="filter-col3 p-r-15 p-b-27">
                        <div class="mtext-102 cl2 p-b-15">Stock Availability</div>
                        <ul>
                            <li class="p-b-6"><a class="filter-link stext-106 trans-04" onclick="applyFilter('availability', 'Available')">Available</a></li>
                            <li class="p-b-6"><a class="filter-link stext-106 trans-04" onclick="applyFilter('availability', 'Unavailable')">Out of Stock</a></li>
                        </ul>
                    </div>

                    <div class="filter-col4 p-r-15 p-b-27">
                        <div class="mtext-102 cl2 p-b-15">Alphabetical</div>
                        <ul>
                            <li class="p-b-6"><a  class="filter-link stext-106 trans-04" onclick="applyFilter('sort', 'alphabetical')">Alphabetical (A-Z)</a></li>
                            <li class="p-b-6"><a class="filter-link stext-106 trans-04" onclick="applyFilter('sort', 'reverseAlphabetical')">Alphabetical (Z-A)</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Enhanced Product Grid -->
        <div class="row isotope-grid">
            <% products.forEach(value => { %>
                <div class="col-sm-6 col-md-4 col-lg-3 p-b-35 isotope-item <%= value.category ? value.category.name.toLowerCase() : 'uncategorized' %>">
                    <div class="block2">
                        <div class="block2-pic hov-img0">
                            <img src="/uploads/product-images/<%= value.productImage[0] %>" alt="IMG-PRODUCT">
                            <a href="/productDetails?id=<%= value._id %>" 
                               class="block2-btn flex-c-m stext-103 cl2 size-102 bg0 bor2 hov-btn1 p-lr-15 trans-04">
                                Quick View
                            </a>
                        </div>
                        <div class="block2-txt flex-w flex-t p-t-14">
                            <div class="block2-txt-child1 flex-col-l">
                                <a href="/productDetails?id=<%= value._id %>" 
                                   class="stext-104 cl4 hov-cl1 trans-04 js-name-b2 p-b-6">
                                    <%= value.name %>
                                </a>
                                <span class="stext-105 cl3">₹<%= value.salePrice %></span>
                                <small class="text-muted">
                                    <%= value.category ? value.category.name : 'Uncategorized' %>
                                </small>
                            </div>
                        </div>
                    </div>
                </div>
            <% }) %>
        </div>

        <!-- Pagination -->
        <nav aria-label="Page navigation" class="pagination-container">
            <ul class="pagination justify-content-center">
                <% for (let i = 1; i <= totalpage; i++) { %>
                    <li class="page-item <%= page === i ? 'active' : '' %>">
                        <a class="page-link" href="/shop?page=<%= i %>&search=<%= searchQuery || '' %>&sort=<%= sortOption || '' %>&price=<%= price || '' %>&availability=<%= availability || '' %>"><%= i %></a>
                    </li>
                <% } %>
            </ul>
        </nav>
    </div>
</div>

<script>
    // Show loader on page load
    document.addEventListener('DOMContentLoaded', function () {
        var loader = document.getElementById('loader');
        loader.style.display = 'flex';
    });

    // Hide loader when the content is fully loaded
    window.addEventListener('load', function () {
        var loader = document.getElementById('loader');
        loader.style.display = 'none';
    });

    function applyFilter(filterName, filterValue) {
        const urlParams = new URLSearchParams(window.location.search);
        urlParams.set(filterName, filterValue);
        const currentPage = urlParams.get('page') || 1; 
        urlParams.set('page', currentPage);
        const searchQuery = document.getElementById('searchInput').value;
        if (searchQuery) {
            urlParams.set('search', searchQuery);
        }
        window.location.search = urlParams.toString();
    }

    // <!-- At the bottom of your header partial -->
	// 	document.addEventListener('DOMContentLoaded', function() {
	// 		// Function to update cart count from any page
	// 		window.updateCartCount = function(count) {
	// 			const cartIcon = document.querySelector('.js-show-cart');
	// 			if (cartIcon) {
	// 				cartIcon.setAttribute('data-notify', count);
	// 			}
	// 		};
		
	// 		// Listen for cart update events
	// 		document.addEventListener('cartUpdated', function(event) {
	// 			updateCartCount(event.detail.count);
	// 		});
	// 	});
		
	// 	// Function to dispatch cart update event (can be called from any page)
	// 	window.dispatchCartUpdate = function(count) {
	// 		document.dispatchEvent(new CustomEvent('cartUpdated', {
	// 			detail: { count: count }
	// 		}));
	// 	};
</script>
<script src="/javascript/cartHandler.js"></script>

<%- include('../../views/partials/userPartials/footer') %>